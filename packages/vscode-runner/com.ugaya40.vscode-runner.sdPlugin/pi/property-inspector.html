<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>VSCode Runner Settings</title>
  <script src="../sdpi-components.js"></script>
</head>
<body>
  <div class="sdpi-wrapper">
    <sdpi-item label="Port">
      <input type="text" id="port" class="sdpi-item-value" placeholder="52375" />
    </sdpi-item>
    <sdpi-item label="Description">
      <ul style="font-size: 12px; color: #999; margin: 0; padding-left: 16px;">
        <li>Must match the port in Stream Deck Integration (VSCode Extension) settings (Default: 52375)</li>
        <li>This setting is shared across all buttons</li>
      </ul>
    </sdpi-item>
  </div>

  <script>
    const portInput = document.getElementById("port");

    const [getPort, setPort] = SDPIComponents.useGlobalSettings("port", (value) => {
      portInput.value = value ?? "52375";
    });

    getPort().then((value) => {
      portInput.value = value ?? "52375";
    });

    portInput.addEventListener("input", () => {
      const port = portInput.value || "52375";
      setPort(port);
    });
  </script>
</body>
</html>
